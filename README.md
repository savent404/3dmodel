# 3dmodel

ä¸€ä¸ªæ”¯æŒAIé©±åŠ¨çš„3Dæ¨¡å‹åˆ›å»ºå’Œæ“ä½œå·¥å…·ã€‚

## åŠŸèƒ½ç‰¹æ€§

- ğŸ¤– AIé©±åŠ¨çš„3Dæ¨¡å‹ç”Ÿæˆ
- ğŸ’¬ **å¤šè½®å¯¹è¯å¼äº¤äº’ç•Œé¢**
- ğŸ¯ æ”¯æŒå¤šç§3Då‡ ä½•ä½“ï¼ˆç«‹æ–¹ä½“ã€åœ†æŸ±ä½“ã€åŠåœ†æŸ±ä½“ã€NACA4ç¿¼å‹ï¼‰
- ğŸ”§ 3Dæ¨¡å‹å˜æ¢æ“ä½œï¼ˆå¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾ï¼‰
- ğŸ¨ é«˜è´¨é‡3Dæ¸²æŸ“å’Œå¯è§†åŒ–
- âš¡ å¼ºå¤§çš„å¸ƒå°”è¿ç®—æ”¯æŒ
- ğŸ“ å¤šç§3Dæ–‡ä»¶æ ¼å¼å¯¼å‡º
- ğŸ”„ **å®æ—¶æ¨¡å‹æ›´æ–°å’Œæ˜¾ç¤ºç®¡ç†**

## æ¸²æŸ“åç«¯

### Trimesh Backend (æ¨è)
- **æ–‡ä»¶**: `backend_trimesh.py`
- **ä¼˜åŠ¿**:
  - âœ… å®Œæ•´çš„å¸ƒå°”è¿ç®—æ”¯æŒï¼ˆå¹¶é›†ã€äº¤é›†ã€å·®é›†ï¼‰
  - âœ… ç²¾ç¡®çš„3Då‡ ä½•ä½“è¡¨ç¤º
  - âœ… æ”¯æŒå¤šç§3Dæ–‡ä»¶æ ¼å¼å¯¼å‡ºï¼ˆSTLã€OBJã€PLYç­‰ï¼‰
  - âœ… ä¸“ä¸šçº§3Då‡ ä½•å¤„ç†æ€§èƒ½
  - âœ… ç½‘æ ¼åˆ†æå’Œä¿®å¤åŠŸèƒ½
  - âœ… æ›´å¥½çš„3Då¯è§†åŒ–æ•ˆæœ
  - âœ… **æ”¯æŒæ˜¾ç¤ºçª—å£ç®¡ç†å’Œå…³é—­**

### Matplotlib Backend (å·²åºŸå¼ƒ)
- **æ–‡ä»¶**: `backend_matplot_deprecated.py`
- **é—®é¢˜**:
  - âŒ å¸ƒå°”è¿ç®—æ”¯æŒæœ‰é™
  - âŒ 3Då‡ ä½•è¡¨ç¤ºä¸å¤Ÿç²¾ç¡®
  - âŒ æ€§èƒ½å’Œå¯è§†åŒ–è´¨é‡è¾ƒä½

## å¿«é€Ÿå¼€å§‹

### å®‰è£…ä¾èµ–
```bash
pip install -r requirements.txt
```

### CLI å¤šè½®å¯¹è¯æ¨¡å¼ï¼ˆæ¨èï¼‰

ä½¿ç”¨CLIå‰ç«¯è¿›è¡Œå¤šè½®å¯¹è¯å¼æ¨¡å‹ç”Ÿæˆå’Œä¿®æ­£ï¼š

```bash
# æ–¹å¼1ï¼šä½¿ç”¨ç‹¬ç«‹CLIè„šæœ¬
python cli.py

# æ–¹å¼2ï¼šä½¿ç”¨agent.pyçš„CLIæ¨¡å¼
python agent.py cli
```

**CLIåŠŸèƒ½ç‰¹æ€§ï¼š**
- ğŸ”„ å¤šè½®å¯¹è¯æ”¯æŒï¼Œå¯ä»¥åŸºäºå†å²å¯¹è¯ä¸æ–­ä¿®æ­£æ¨¡å‹
- ğŸ“ æ™ºèƒ½ç¼“å­˜æœºåˆ¶ï¼ŒåŸºäºå¯¹è¯å†å²åˆ›å»ºç¼“å­˜
- ğŸ¨ è‡ªåŠ¨å…³é—­ä¸Šä¸€è½®æ¸²æŸ“ï¼Œæ˜¾ç¤ºæ–°çš„æ¨¡å‹
- ğŸ“Š å¯¹è¯å†å²æŸ¥çœ‹å’Œç®¡ç†
- ğŸ§¹ æ¸…é™¤å½“å‰æ¨¡å‹å’Œå¯¹è¯å†å²åŠŸèƒ½

**CLIå‘½ä»¤ï¼š**
- `quit` æˆ– `exit`ï¼šé€€å‡ºç¨‹åº
- `history` æˆ– `å†å²`ï¼šæŸ¥çœ‹å¯¹è¯å†å²
- `clear` æˆ– `æ¸…é™¤`ï¼šæ¸…é™¤å½“å‰æ¨¡å‹å’Œå¯¹è¯å†å²ï¼Œå¼€å§‹æ–°å¯¹è¯

### åŸºæœ¬ç¼–ç¨‹æ¥å£

```python
from agent import Agent, gen_tool
from backend_trimesh import BackendTrimesh

# åˆ›å»ºagentå’Œåç«¯
agent = Agent(tools=gen_tool())
backend = BackendTrimesh("trimesh")
agent.set_backend(backend)

# ç”Ÿæˆ3Dæ¨¡å‹
user_input = "åˆ›å»ºä¸€ä¸ªç«‹æ–¹ä½“å’Œåœ†æŸ±ä½“"
models, operations = agent.input(user_input)

# å˜æ¢å’Œæ¸²æŸ“æ¨¡å‹
transformed_models = backend.transform(models, operations)
backend.render(transformed_models)

# å¤šè½®å¯¹è¯ç¤ºä¾‹
# ç¬¬ä¸€è½®
models1, ops1 = agent.input("åˆ›å»ºä¸€ä¸ªNACA4ç¿¼å‹")
transformed_models1 = backend.transform(models1, ops1)
backend.render(transformed_models1)

# å…³é—­å½“å‰æ¸²æŸ“ï¼Œå‡†å¤‡ä¸‹ä¸€è½®
backend.close_display()

# ç¬¬äºŒè½® - åŸºäºå†å²å¯¹è¯ä¿®æ­£
models2, ops2 = agent.input("å°†ç¿¼å‹æ”¾å¤§1.5å€", use_conversation_cache=True)
transformed_models2 = backend.transform(models2, ops2)
backend.render(transformed_models2)
```

### è¿è¡Œç¤ºä¾‹

æŸ¥çœ‹åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹ï¼š
```bash
python examples/basic_trimesh_example.py
```

æŸ¥çœ‹å®Œæ•´æ¼”ç¤ºï¼ˆéœ€è¦openaiåº“ï¼‰ï¼š
```bash
python examples/demo_trimesh.py
```

**æ–°å¢CLIç¤ºä¾‹ä½¿ç”¨ï¼š**
```bash
# å¯åŠ¨CLIè¿›è¡Œå¤šè½®å¯¹è¯
python cli.py

# ç¤ºä¾‹å¯¹è¯æµç¨‹ï¼š
# [ç¬¬1è½®] è¯·è¾“å…¥æ‚¨çš„éœ€æ±‚: åˆ›å»ºä¸€ä¸ªæœºç¿¼æ¨¡å‹ï¼Œä½¿ç”¨3ä¸ªNACA4ç¿¼å‹
# [ç¬¬2è½®] è¯·è¾“å…¥æ‚¨çš„éœ€æ±‚: å°†ç¿¼å‹é—´è·å¢åŠ åˆ°20%ï¼Œå¹¶è°ƒæ•´ç¿¼å‹å¼¯åº¦
# [ç¬¬3è½®] è¯·è¾“å…¥æ‚¨çš„éœ€æ±‚: ç»™æœºç¿¼æ·»åŠ ä¸€ä¸ªå‘ä¸Šçš„å€¾æ–œè§’åº¦
```

### è¿è¡Œæµ‹è¯•

è¿è¡Œæ‰€æœ‰æµ‹è¯•ï¼š
```bash
python tests/run_tests.py
```

è¿è¡Œç‰¹å®šæµ‹è¯•ï¼š
```bash
python tests/run_tests.py --test backend_trimesh
```

æŸ¥çœ‹å¯ç”¨æµ‹è¯•ï¼š
```bash
python tests/run_tests.py --list
```

## æ”¯æŒçš„3Dæ¨¡å‹ç±»å‹

- **ç«‹æ–¹ä½“ (Cube)**: å¯å®šåˆ¶å°ºå¯¸å’Œæ–¹å‘çš„é•¿æ–¹ä½“
- **åœ†æŸ±ä½“ (Cylinder)**: æ”¯æŒæ¤­åœ†æˆªé¢çš„åœ†æŸ±ä½“
- **åŠåœ†æŸ±ä½“ (Half Cylinder)**: åŠåœ†æˆªé¢çš„åœ†æŸ±ä½“

## æ”¯æŒçš„æ“ä½œ

- **åˆšä½“å˜æ¢**: å¹³ç§»ã€æ—‹è½¬ã€ç¼©æ”¾
- **å¸ƒå°”è¿ç®—**: å¹¶é›†ã€äº¤é›†ã€å·®é›†ï¼ˆä»…Trimeshåç«¯ï¼‰

## æ–‡ä»¶å¯¼å‡º

Trimeshåç«¯æ”¯æŒå¯¼å‡ºåˆ°å¤šç§3Dæ–‡ä»¶æ ¼å¼ï¼š
- STL (é€‚ç”¨äº3Dæ‰“å°)
- OBJ (é€šç”¨3Dæ ¼å¼)
- PLY (ç‚¹äº‘æ ¼å¼)
- ç­‰æ›´å¤šæ ¼å¼

## é¡¹ç›®ç»“æ„

```
â”œâ”€â”€ agent.py                      # ä¸»Agentç±»
â”œâ”€â”€ backend_trimesh.py            # Trimeshæ¸²æŸ“åç«¯
â”œâ”€â”€ backend_matplot_deprecated.py # å·²åºŸå¼ƒçš„Matplotlibåç«¯
â”œâ”€â”€ models.py                     # 3Dæ¨¡å‹å®šä¹‰
â”œâ”€â”€ operations.py                 # 3Dæ“ä½œå®šä¹‰
â”œâ”€â”€ requirements.txt              # ä¾èµ–åŒ…åˆ—è¡¨
â”œâ”€â”€ README.md                     # é¡¹ç›®è¯´æ˜
â”œâ”€â”€ tests/                        # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py              # æµ‹è¯•åŒ…åˆå§‹åŒ–
â”‚   â”œâ”€â”€ run_tests.py             # æµ‹è¯•è¿è¡Œå™¨
â”‚   â””â”€â”€ test_backend_trimesh.py  # Trimeshåç«¯æµ‹è¯•
â””â”€â”€ examples/                     # ç¤ºä¾‹ç›®å½•
    â”œâ”€â”€ __init__.py              # ç¤ºä¾‹åŒ…åˆå§‹åŒ–
    â”œâ”€â”€ basic_trimesh_example.py # åŸºæœ¬ä½¿ç”¨ç¤ºä¾‹
    â””â”€â”€ demo_trimesh.py          # å®Œæ•´åŠŸèƒ½æ¼”ç¤º
```

## æ›´æ–°æ—¥å¿—

### v2.0 - Trimesh Backend
- âœ¨ æ–°å¢Trimeshæ¸²æŸ“åç«¯
- âœ¨ æ”¯æŒå®Œæ•´çš„å¸ƒå°”è¿ç®—
- âœ¨ æ–°å¢æ–‡ä»¶å¯¼å‡ºåŠŸèƒ½
- ğŸ—‘ï¸ åºŸå¼ƒMatplotlibåç«¯
- ğŸ“ˆ å¤§å¹…æå‡3Då¤„ç†æ€§èƒ½å’Œè´¨é‡